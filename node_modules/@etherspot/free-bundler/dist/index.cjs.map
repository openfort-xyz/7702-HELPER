{"version":3,"sources":["../src/index.ts","../src/config.ts","../src/utils.ts","../src/client.ts"],"sourcesContent":["export * from './types'\nexport * from './config.js'\nexport * from './utils.js'\nexport * from './client.js'\n\n// Default export is the main function\nexport { createFreeBundler as default } from './client.js'","import type { BundlerConfig } from './types'\n\n/**\n * Free bundler endpoints for different chains\n */\nexport const FREE_BUNDLER_URLS: Record<number, string> = {\n  // Ethereum Mainnet\n  1: 'https://bundler.etherspot.io/1',\n  \n  // Ethereum Sepolia\n  11155111: 'https://bundler.etherspot.io/11155111',\n\n  \n  // Arbitrum One\n  42161: 'https://bundler.etherspot.io/42161',\n  \n  // Arbitrum Sepolia\n  421614: 'https://bundler.etherspot.io/421614',\n  \n  // Optimism Mainnet\n  10: 'https://bundler.etherspot.io/10',\n  \n  // Optimism Sepolia\n  11155420: 'https://bundler.etherspot.io/11155420',\n  \n} as const\n\n/**\n * Chain configuration with metadata\n */\nexport const BUNDLER_CONFIGS: Record<number, BundlerConfig> = {\n  1: {\n    chainId: 1,\n    name: 'Ethereum Mainnet',\n    url: FREE_BUNDLER_URLS[1],\n    isTestnet: false,\n  },\n  11155111: {\n    chainId: 11155111,\n    name: 'Ethereum Sepolia',\n    url: FREE_BUNDLER_URLS[11155111],\n    isTestnet: true,\n  },\n  42161: {\n    chainId: 42161,\n    name: 'Arbitrum One',\n    url: FREE_BUNDLER_URLS[42161],\n    isTestnet: false,\n  },\n  421614: {\n    chainId: 421614,\n    name: 'Arbitrum Sepolia',\n    url: FREE_BUNDLER_URLS[421614],\n    isTestnet: true,\n  },\n  10: {\n    chainId: 10,\n    name: 'Optimism Mainnet',\n    url: FREE_BUNDLER_URLS[10],\n    isTestnet: false,\n  },\n  11155420: {\n    chainId: 11155420,\n    name: 'Optimism Sepolia',\n    url: FREE_BUNDLER_URLS[11155420],\n    isTestnet: true,\n  },\n} as const\n\n/**\n * Default transport options\n */\nexport const DEFAULT_TRANSPORT_OPTIONS = {\n  timeout: 30000,\n  retryCount: 3,\n  retryDelay: 150,\n} as const\n\n/**\n * Default client options\n */\nexport const DEFAULT_CLIENT_OPTIONS = {\n  name: 'Free Bundler Client',\n  pollingInterval: 4000,\n} as const","import { FREE_BUNDLER_URLS, BUNDLER_CONFIGS } from './config.js'\nimport type { BundlerConfig } from './types'\n\n/**\n * Get the preconfigured bundler URL for a given chain ID\n * \n * @param chainId - The chain ID\n * @returns The bundler URL or undefined if not supported\n */\nexport function getFreeBundlerUrl(chainId: number): string | undefined {\n  return FREE_BUNDLER_URLS[chainId]\n}\n\n/**\n * Get bundler configuration for a given chain ID\n * \n * @param chainId - The chain ID\n * @returns The bundler configuration or undefined if not supported\n */\nexport function getBundlerConfig(chainId: number): BundlerConfig | undefined {\n  return BUNDLER_CONFIGS[chainId]\n}\n\n/**\n * Get all supported chain IDs for free bundlers\n * \n * @returns Array of supported chain IDs\n */\nexport function getSupportedChainIds(): number[] {\n  return Object.keys(FREE_BUNDLER_URLS).map(Number)\n}\n\n/**\n * Get all bundler configurations\n * \n * @returns Array of all bundler configurations\n */\nexport function getAllBundlerConfigs(): BundlerConfig[] {\n  return Object.values(BUNDLER_CONFIGS)\n}\n\n/**\n * Get bundler configurations filtered by testnet status\n * \n * @param isTestnet - Whether to get testnet or mainnet configurations\n * @returns Array of filtered bundler configurations\n */\nexport function getBundlerConfigsByNetwork(isTestnet: boolean): BundlerConfig[] {\n  return getAllBundlerConfigs().filter(config => config.isTestnet === isTestnet)\n}\n\n/**\n * Check if a chain ID has a preconfigured free bundler\n * \n * @param chainId - The chain ID to check\n * @returns True if supported, false otherwise\n */\nexport function isChainSupported(chainId: number): boolean {\n  return chainId in FREE_BUNDLER_URLS\n}\n\n/**\n * Get chain name by chain ID\n * \n * @param chainId - The chain ID\n * @returns The chain name or 'Unknown Chain' if not found\n */\nexport function getChainName(chainId: number): string {\n  const config = getBundlerConfig(chainId)\n  return config?.name ?? 'Unknown Chain'\n}\n\n/**\n * Validate chain ID and throw descriptive error if unsupported\n * \n * @param chainId - The chain ID to validate\n * @throws Error if chain ID is not supported\n */\nexport function validateChainId(chainId: number): void {\n  if (!isChainSupported(chainId)) {\n    const supportedChains = getSupportedChainIds().join(', ')\n    throw new Error(\n      `Unsupported chain ID: ${chainId}. ` +\n      `Supported chains: ${supportedChains}. ` +\n      `Use a custom bundler URL for unsupported chains.`\n    )\n  }\n}","import type { Account, Chain, Transport } from 'viem'\nimport { createClient, http } from 'viem'\nimport { bundlerActions, SmartAccount } from 'viem/account-abstraction'\n\nimport type { FreeBundlerClient, CreateFreeBundlerOptions } from './types'\nimport { DEFAULT_TRANSPORT_OPTIONS, DEFAULT_CLIENT_OPTIONS } from './config.js'\nimport { getFreeBundlerUrl, validateChainId } from './utils.js'\n\n/**\n * Creates a bundler client with preconfigured free bundler URLs\n * \n * @param chainId - The chain ID to create the bundler client for\n * @param options - Optional configuration overrides\n * @returns A configured viem bundler client\n * \n * @example\n * ```typescript\n * import { createFreeBundler } from '@etherspot/free-bundler'\n * \n * Create bundler client for Ethereum Sepolia\n * const bundlerClient = createFreeBundler(11155111)\n * \n * Create bundler client for Polygon with custom transport options\n * const bundlerClient = createFreeBundler(137, {\n *   transport: {\n *     timeout: 10000,\n *     retryCount: 3\n *   }\n * })\n * \n * Use the bundler client\n * const userOperation = await bundlerClient.sendUserOperation({\n *   userOperation: {\n *     sender: '0x...',\n *     nonce: 0n,\n *     callData: '0x...',\n *     ... other fields\n *   },\n *   entryPoint: '0x...'\n * })\n * ```\n */\nexport function createFreeBundler<\n  chain extends Chain,\n  account extends SmartAccount | undefined = undefined,\n>(\n  options: CreateFreeBundlerOptions<chain, account>\n): FreeBundlerClient<Transport, chain, account> {\n  // Get bundler URL from options or use preconfigured free endpoint\n  const bundlerUrl = options.bundlerUrl || getFreeBundlerUrl(options.chain.id)\n\n  if (!bundlerUrl) {\n    validateChainId(options.chain.id)\n  }\n\n  // Create HTTP transport with configuration\n  const transport = http(bundlerUrl, {\n    timeout: options.transport?.timeout ?? DEFAULT_TRANSPORT_OPTIONS.timeout,\n    retryCount: options.transport?.retryCount ?? DEFAULT_TRANSPORT_OPTIONS.retryCount,\n    retryDelay: options.transport?.retryDelay ?? DEFAULT_TRANSPORT_OPTIONS.retryDelay,\n  })\n\n  // Create the base client\n  const client = createClient({\n    transport,\n    chain: options.chain,\n    account: options.account,\n    name: options.client?.name ?? DEFAULT_CLIENT_OPTIONS.name,\n    pollingInterval: options.client?.pollingInterval ?? DEFAULT_CLIENT_OPTIONS.pollingInterval,\n  })\n\n  // Extend with bundler actions\n  return client.extend(bundlerActions) as FreeBundlerClient<Transport, chain, account>\n}"],"mappings":"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","names":[]}
